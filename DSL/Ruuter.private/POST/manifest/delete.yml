check_for_required_parameters:
  switch:
    - condition: ${incoming.body.manifestId == null}
      next: return_incorrect_request
  next: extract_request_data

extract_request_data:
  assign:
    manifestId: ${incoming.body.manifestId}
  next: delete_manifest

delete_manifest:
  call: http.post
  args:
    url: http://resql:8052/delete-manifest
    body:
      manifest_id: ${manifestId}
  result: results
  next: check_result

check_result:
  switch:
    - condition: ${200 <= results.response.statusCodeValue && results.response.statusCodeValue < 300}
      next: return_ok
  next: return_bad_request  

return_ok:
  status: 200
  return: "Manifest Deleted Successfully"
  next: end  

return_bad_request:
  status: 400
  return: ${results.response.body.message}
  next: end  

return_incorrect_request:
  status: 400
  return: "Required parameter(s) missing"
  next: end
